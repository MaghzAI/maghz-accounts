# ๐ข ูุธุงู ุชูููุฏ ุงูุฃููุงุฏ ุงูุชููุงุฆูุฉ

## โ ุงููููุฒุงุช ุงูููุชููุฉ

ุชู ุฅูุดุงุก ูุธุงู ุดุงูู ูุชูููุฏ ุงูุฃููุงุฏ ุงูุชููุงุฆูุฉ ูุฌููุน ุงููุณุชูุฏุงุช ูู ุงููุธุงู ูุน ุฅููุงููุฉ ุชุฎุตูุต ูุงูู ููุชูุณูู.

---

## ๐ ุงูููููุงุช ุงูุฑุฆูุณูุฉ

### 1. ูุงุนุฏุฉ ุงูุจูุงูุงุช

#### ุฌุฏูู `code_settings`
```sql
CREATE TABLE code_settings (
  id TEXT PRIMARY KEY,
  entity_type TEXT NOT NULL UNIQUE,  -- ููุน ุงููุณุชูุฏ
  prefix TEXT NOT NULL,               -- ุงูุจุงุฏุฆุฉ (ูุซู: PROD, INV)
  separator TEXT NOT NULL DEFAULT '-', -- ุงููุงุตู (-, _, ุฃู ูุงุฑุบ)
  digit_length INTEGER NOT NULL DEFAULT 4, -- ุนุฏุฏ ุงูุฃุฑูุงู
  current_number INTEGER NOT NULL DEFAULT 0, -- ุขุฎุฑ ุฑูู ูุณุชุฎุฏู
  suffix TEXT,                        -- ูุงุญูุฉ ุงุฎุชูุงุฑูุฉ
  example TEXT NOT NULL,              -- ูุซุงู ุนูู ุงูููุฏ
  is_active BOOLEAN NOT NULL DEFAULT true,
  created_at TIMESTAMP,
  updated_at TIMESTAMP
);
```

### 2. ุงูุฅุนุฏุงุฏุงุช ุงูุงูุชุฑุงุถูุฉ

ุชู ุชููุฆุฉ 8 ุฃููุงุน ูู ุงููุณุชูุฏุงุช:

| ููุน ุงููุณุชูุฏ | ุงูุจุงุฏุฆุฉ | ุงููุงุตู | ุงูุฃุฑูุงู | ูุซุงู |
|------------|---------|--------|---------|-------|
| Product | PROD | - | 4 | PROD-0001 |
| Warehouse | WH | - | 3 | WH-001 |
| Transaction | TRX | - | 5 | TRX-00001 |
| Customer | CUST | - | 4 | CUST-0001 |
| Vendor | VEND | - | 4 | VEND-0001 |
| Invoice | INV | - | 5 | INV-00001 |
| Journal | JE | - | 5 | JE-00001 |
| Reconciliation | REC | - | 4 | REC-0001 |

---

## ๐ง ุงููููุงุช ุงููุถุงูุฉ

### 1. Schema
- **`lib/db/schema.ts`** - ุฅุถุงูุฉ ุฌุฏูู `codeSettings`

### 2. ุฏูุงู ุงูุชูููุฏ
- **`lib/code-generator.ts`** - ุฏูุงู ุชูููุฏ ุงูุฃููุงุฏ:
  - `generateCode(entityType)` - ุชูููุฏ ููุฏ ุฌุฏูุฏ
  - `generateExample()` - ุชูููุฏ ูุซุงู ููุนุฑุถ
  - `getCodeSettings()` - ุฌูุจ ุฅุนุฏุงุฏุงุช ููุน ูุนูู
  - `initializeDefaultCodeSettings()` - ุชููุฆุฉ ุงูุฅุนุฏุงุฏุงุช ุงูุงูุชุฑุงุถูุฉ

### 3. API Endpoints
- **`app/api/code-settings/route.ts`**
  - `GET /api/code-settings` - ุฌูุจ ุฌููุน ุงูุฅุนุฏุงุฏุงุช
  - `POST /api/code-settings` - ุฅูุดุงุก/ุชุญุฏูุซ ุฅุนุฏุงุฏุงุช

- **`app/api/generate-code/route.ts`**
  - `GET /api/generate-code?type=product` - ุชูููุฏ ููุฏ ุฌุฏูุฏ

### 4. Scripts
- **`scripts/init-code-settings.ts`** - ุณูุฑูุจุช ุชููุฆุฉ ุงูุฅุนุฏุงุฏุงุช

### 5. ูุงุฌูุฉ ุงูุฅุนุฏุงุฏุงุช
- **`app/(dashboard)/settings/page.tsx`** - ุชุจููุจ "Code Settings"

---

## ๐ฏ ููููุฉ ุงูุงุณุชุฎุฏุงู

### 1. ุนุฑุถ ูุชุนุฏูู ุงูุฅุนุฏุงุฏุงุช

1. ุงุฐูุจ ุฅูู `/settings`
2. ุงุถุบุท ุนูู ุชุจููุจ **"Code Settings"**
3. ุณุชุฌุฏ ุฌุฏูู ุจุฌููุน ุฃููุงุน ุงููุณุชูุฏุงุช
4. ุงุถุบุท **"Edit"** ูุชุนุฏูู ุฃู ุฅุนุฏุงุฏ

### 2. ุชุนุฏูู ุชูุณูู ุงูููุฏ

ุนูุฏ ุงูุถุบุท ุนูู Editุ ููููู ุชุนุฏูู:

- **Prefix** (ุงูุจุงุฏุฆุฉ): ุงููุต ูู ุงูุจุฏุงูุฉ (ูุซู: PROD, INV)
- **Separator** (ุงููุงุตู): 
  - `-` (Dash)
  - `_` (Underscore)
  - ูุงุฑุบ (ุจุฏูู ูุงุตู)
- **Digit Length** (ุนุฏุฏ ุงูุฃุฑูุงู): ูู 1 ุฅูู 10
- **Suffix** (ุงููุงุญูุฉ): ูุต ุงุฎุชูุงุฑู ูู ุงูููุงูุฉ (ูุซู: -2025)

**ูุนุงููุฉ ููุฑูุฉ:** ูุธูุฑ ูุซุงู ุนูู ุงูููุฏ ุฃุซูุงุก ุงูุชุนุฏูู

### 3. ุงุณุชุฎุฏุงู ุงูููุฏ ุงูุชููุงุฆู ูู ุงูููุงุฐุฌ

#### ูุซุงู: ูููุฐุฌ ุงูููุชุฌ

```typescript
// ุนูุฏ ูุชุญ ุงููููุฐุฌ
async function generateProductCode() {
  const response = await fetch("/api/generate-code?type=product");
  const { code } = await response.json();
  setProductForm(prev => ({ ...prev, code }));
}

// ุญูู ุงูููุฏ (ูููุฑุงุกุฉ ููุท)
<Input
  value={productForm.code}
  readOnly
  className="bg-muted"
  placeholder="Auto-generated"
/>
```

---

## ๐ ุขููุฉ ุงูุนูู

### 1. ุชูููุฏ ุงูููุฏ

```
1. ุฌูุจ ุฅุนุฏุงุฏุงุช ููุน ุงููุณุชูุฏ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
2. ุฒูุงุฏุฉ currentNumber ุจููุฏุงุฑ 1
3. ุชุญุฏูุซ currentNumber ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
4. ุชูููู ุงูููุฏ: prefix + separator + paddedNumber + suffix
5. ุฅุฑุฌุงุน ุงูููุฏ
```

### 2. ูุซุงู ุนูู ุงูุชูููุฏ

ุฅุนุฏุงุฏุงุช ุงูููุชุฌ:
- Prefix: `PROD`
- Separator: `-`
- Digit Length: `4`
- Current Number: `5`
- Suffix: (ูุงุฑุบ)

**ุงูููุฏ ุงููููุฏ:** `PROD-0006`

---

## ๐ ุงูุชุทุจูู ุนูู ุฌููุน ุงูููุงุฐุฌ

### โ ุชู ุงูุชุทุจูู ุนูู:
1. **Products** (ุงูููุชุฌุงุช) - `/inventory`

### ๐ ูููู ุชุทุจููู ุจุณูููุฉ ุนูู:
2. **Warehouses** (ุงููุฎุงุฒู)
3. **Customers** (ุงูุนููุงุก)
4. **Vendors** (ุงูููุฑุฏูู)
5. **Transactions** (ุงููุนุงููุงุช)
6. **Invoices** (ุงูููุงุชูุฑ)
7. **Journal Entries** (ุงููููุฏ ุงูููููุฉ)
8. **Reconciliations** (ุงูุชุณููุงุช)

---

## ๐ก ูููุฐุฌ ุงูุชุทุจูู ุนูู ููุงุฐุฌ ุฃุฎุฑู

### ูุซุงู: ุชุทุจูู ุนูู Warehouses

```typescript
// 1. ุฅุถุงูุฉ ุฏุงูุฉ ุงูุชูููุฏ
async function generateWarehouseCode() {
  const response = await fetch("/api/generate-code?type=warehouse");
  const { code } = await response.json();
  setWarehouseForm(prev => ({ ...prev, code }));
}

// 2. ุงุณุชุฏุนุงุก ุงูุฏุงูุฉ ุนูุฏ ูุชุญ ุงููููุฐุฌ
useEffect(() => {
  generateWarehouseCode();
}, []);

// 3. ุฌุนู ุญูู ุงูููุฏ ูููุฑุงุกุฉ ููุท
<Input
  value={warehouseForm.code}
  readOnly
  className="bg-muted"
/>

// 4. ุชูููุฏ ููุฏ ุฌุฏูุฏ ุจุนุฏ ุงูุญูุธ ุงููุงุฌุญ
if (response.ok) {
  generateWarehouseCode();
}
```

---

## ๐จ ูุงุฌูุฉ ุงูุฅุนุฏุงุฏุงุช

### ุงูุฌุฏูู ุงูุฑุฆูุณู
ูุนุฑุถ:
- ููุน ุงููุณุชูุฏ
- ุงูุชูุณูู (Format)
- ูุซุงู ุนูู ุงูููุฏ
- ุขุฎุฑ ุฑูู ูุณุชุฎุฏู
- ุงูุญุงูุฉ (Active/Inactive)
- ุฒุฑ ุงูุชุนุฏูู

### ูููุฐุฌ ุงูุชุนุฏูู
- ุญููู ุงูุชุนุฏูู (Prefix, Separator, Digit Length, Suffix)
- ูุนุงููุฉ ููุฑูุฉ ููููุฏ
- ุฃุฒุฑุงุฑ ุงูุญูุธ ูุงูุฅูุบุงุก

### ุดุฑุญ ุชูุถูุญู
ุตูุฏูู ุฃุฒุฑู ูุดุฑุญ:
- ูุง ูู ุงูุจุงุฏุฆุฉ
- ูุง ูู ุงููุงุตู
- ูุง ูู ุนุฏุฏ ุงูุฃุฑูุงู
- ูุง ูู ุงููุงุญูุฉ
- ููู ูุนูู ุงูุชุฑููู ุงูุชููุงุฆู

---

## ๐ ุงูุฃูุงู

- โ ุฌููุน API endpoints ูุญููุฉ ุจู Authentication
- โ ุงูุชุญูู ูู ุตูุงุญูุงุช ุงููุณุชุฎุฏู
- โ Validation ููุจูุงูุงุช ุงููุฏุฎูุฉ
- โ ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ุจุดูู ุขูู

---

## ๐ ุงููุฒุงูุง

1. **ุชูุญูุฏ ุงูุชูุณูู**: ุฌููุน ุงูุฃููุงุฏ ุจููุณ ุงูููุท
2. **ุนุฏู ุงูุชูุฑุงุฑ**: ูู ููุฏ ูุฑูุฏ ุชููุงุฆูุงู
3. **ูุงุจู ููุชุฎุตูุต**: ูููู ุชุบููุฑ ุงูุชูุณูู ุจุณูููุฉ
4. **ุณูู ุงูุงุณุชุฎุฏุงู**: ูุง ุญุงุฌุฉ ูุฅุฏุฎุงู ุงูููุฏ ูุฏููุงู
5. **ุงุญุชุฑุงูู**: ุฃููุงุฏ ููุธูุฉ ููุฑุชุจุฉ
6. **ูุฑู**: ูุฏุนู ุฃู ููุน ูู ุงููุณุชูุฏุงุช

---

## ๐ ุงูุงุณุชุฎุฏุงู ุงูุณุฑูุน

### ุชููุฆุฉ ุงูุฅุนุฏุงุฏุงุช (ูุฑุฉ ูุงุญุฏุฉ ููุท)
```bash
npx tsx scripts/init-code-settings.ts
```

### ุชุดุบูู ุงูุชุทุจูู
```bash
npm run dev
```

### ุชุนุฏูู ุงูุฅุนุฏุงุฏุงุช
1. ุงูุชุญ `http://localhost:3000/settings`
2. ุงุฐูุจ ุฅูู ุชุจููุจ "Code Settings"
3. ุนุฏูู ุงูุฅุนุฏุงุฏุงุช ููุง ุชุฑูุฏ
4. ุงุญูุธ ุงูุชุบููุฑุงุช

### ุฅุถุงูุฉ ููุชุฌ ุฌุฏูุฏ
1. ุงุฐูุจ ุฅูู `/inventory`
2. ุงุถุบุท "Add Product"
3. **ุงูููุฏ ุณูููู ููุฌูุฏุงู ุชููุงุฆูุงู!**
4. ุงููุฃ ุจุงูู ุงูุญููู
5. ุงุญูุธ

---

## โจ ุงููุชูุฌุฉ

ุงูุขู ุฌููุน ุงููุณุชูุฏุงุช ูู ุงููุธุงู ุชุญุตู ุนูู ุฃููุงุฏ ุชููุงุฆูุฉ ููุธูุฉ ููุงุจูุฉ ููุชุฎุตูุต ุจุงููุงูู ูู ุตูุญุฉ ุงูุฅุนุฏุงุฏุงุช! ๐
